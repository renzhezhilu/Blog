
<!DOCTYPE html>
<html>
<head>
	<title>时间对比-几时之前</title>
</head>
<body>
<style type="text/css">
	input,button {  height: 50px; line-height: 50px; font-size: 40px; }
	div { font-size: 100px; line-height: 120px; }
</style>
<input id="time_input" type="text" value="2018,8,6,0:47:15"></input>
<button type="button" onclick="time(document.getElementById('time_input').value)">确定</button>
<br>结果：
<div id="divbox">--</div>
<script type="text/javascript">
function time (agetime) {

	var agetime_s = Date.parse(agetime);//发布时间毫秒数
	var nowtime = new Date();
	var nowtime_s = nowtime.getTime();//现在时间毫秒数
	var smtime = nowtime_s-agetime_s;//时间差
	var y = (smtime/1000/60/60/24/30/12);
	var m = (smtime/1000/60/60/24/30);
	var d =(smtime/1000/60/60/24);
	var h = (smtime/1000/60/60);
	var min = (smtime/1000/60);
	var s = (smtime/1000);
	//1年以上，下同
	if (y>=1) {divbox(y.toFixed(0) +"年前");}
	//1年之内，下同
	else{
		if (m<12 && m>=1) {divbox(m.toFixed(0) +"月前");}
		else{
			if (d<31 && d>=1) {divbox(d.toFixed(0) +"天前");}	
			else{
				if (h<24 && h>=1) {divbox(h.toFixed(0) +"小时前");}
				else{
					if (min<60 && min>=1) {divbox(min.toFixed(0) +"分钟前");}
					else{
						if (s<60 && s>=1) {divbox(s.toFixed(0)+"秒前");}
						else{alert("时间是未来的")}
					}
				}	
			}
		}
	}
}


function divbox(con){ //2018,8,6,0:41:15
	document.getElementById('divbox').innerHTML=con
}
	//alert( smtime/1000/60/60/24/30/12 )

</script>
</body>
</html>
